<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Verifying Hardware with Vertex</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded "><a href="tutorials/tutorials.html"><strong aria-hidden="true">1.</strong> Tutorials</a></li><li class="chapter-item expanded "><a href="user/user.html"><strong aria-hidden="true">2.</strong> User Guide</a></li><li class="chapter-item expanded "><a href="topic/topic.html"><strong aria-hidden="true">3.</strong> Topic Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="topic/overview.html"><strong aria-hidden="true">3.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="topic/vectors.html"><strong aria-hidden="true">3.2.</strong> Test Vectors</a></li><li class="chapter-item expanded "><a href="topic/coverage.html"><strong aria-hidden="true">3.3.</strong> Coverage</a></li><li class="chapter-item expanded "><a href="topic/events.html"><strong aria-hidden="true">3.4.</strong> Events</a></li></ol></li><li class="chapter-item expanded "><a href="reference/reference.html"><strong aria-hidden="true">4.</strong> Reference</a></li><li class="chapter-item expanded "><a href="glossary.html"><strong aria-hidden="true">5.</strong> Appendix: Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Verifying Hardware with Vertex</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="verifying-hardware-with-vertex"><a class="header" href="#verifying-hardware-with-vertex">Verifying Hardware with Vertex</a></h1>
<h2 id="sections"><a class="header" href="#sections">Sections</a></h2>
<p>The following documentation will be mainly divided into 4 sections:</p>
<ol>
<li><a href="./tutorials/tutorials.html">Tutorials</a> - Step-by-step lessons using Vertex</li>
<li><a href="./user/user.html">User Guide</a> - General procedures for "how-to" solve common problems</li>
<li><a href="./topic/topic.html">Topic Guide</a> - Explanations that clarify and provide more detail to particular topics</li>
<li><a href="./reference/reference.html">Reference</a> - Technical information</li>
</ol>
<h2 id="about-the-project"><a class="header" href="#about-the-project">About the Project</a></h2>
<p>The project is open-source under the MIT license and is available on <a href="https://github.com/cdotrus/vertex">GitHub</a>.</p>
<h2 id="about-the-documentation"><a class="header" href="#about-the-documentation">About the Documentation</a></h2>
<p>Documentation system and methodology is inspired by <a href="https://documentation.divio.com">Divio</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tutorials"><a class="header" href="#tutorials">Tutorials</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="user-guide"><a class="header" href="#user-guide">User Guide</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="topic-guide"><a class="header" href="#topic-guide">Topic Guide</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="overview"><a class="header" href="#overview">Overview</a></h1>
<p><img src="topic/./../images/system.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="test-vectors"><a class="header" href="#test-vectors">Test Vectors</a></h1>
<p>One of the key concepts in the Vertex framework is using <em>file I/O</em> to communicate data between the software model and the hardware design throughout the verification process. When running the hardware simulation, the testbench receives the information about the inputs and expected outputs by reading files called <em>vectors</em>.</p>
<p><em>Vectors</em> store the test vectors for the hardware design to use- that is, they contain the actual data to either drive as inputs or compare with their outputs.</p>
<p>Typically, the set of input test vectors are written to a file called "inputs.txt", and the set of expected output test vectors are written to a file called "outputs.txt".</p>
<h2 id="vectors-file-format"><a class="header" href="#vectors-file-format">Vectors file format</a></h2>
<p>Each vector is entered on a new line in a vectors file.</p>
<p>A vector uses the following pattern:</p>
<pre><code>&lt;port 1 value&gt; &lt;port 2 value&gt; ...
</code></pre>
<p>Each port value contains a string of 1's and 0's and each port is separated by a single space character. An additional space character follows the final port value.</p>
<p>Example: "inputs.txt"</p>
<pre><code>1 0111 0100 
0 1010 1111 
1 1011 1100 
0 0000 1001
</code></pre>
<p>In this example, we are testing a hardware design that has 3 ports to be driven by the vector file (one port of 1-bit width and two ports of 4-bit width). For this simulation, there are 4 test vectors that will be sent as input to the design over the duration of the simulation.</p>
<h2 id="details"><a class="header" href="#details">Details</a></h2>
<p>It is the testbench's responsibility to determine <em>when</em> to actually supply each vector to the hardware design. This approach is taken to provide users with fine-grain control over the timing of the data-flow within the simulation environment.</p>
<p>One of the consequences of having the vectors files have a very simple format allows for easier parsing in the hardware languages. It also means not a lot of additional information is known, such as what order the ports are arranged in each vector.</p>
<p>To check the order of ports that Vertex writes to vectors, see the <code>vertex link</code> command. An option is available to print the list of ports in their vector order for inputs and outputs.</p>
<p>A user can also find the port order by identifying the order in which the ports appear in the source code for the hardware design's port interface declarations.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="coverage"><a class="header" href="#coverage">Coverage</a></h1>
<p>When verifying hardware, not only is checking <em>what</em> the design generated as outputs important, but also checking <em>how</em> the design generated those outputs is just as important. This tracking of knowledge in <em>how</em> the design reached a set of outputs is known as <em>coverage</em>.</p>
<h3 id="the-importance-of-coverage"><a class="header" href="#the-importance-of-coverage">The importance of coverage</a></h3>
<p>For example, consider we are testing a hardware addition unit. If we run 1,000 test cases and they are all correct, we may be led to believe our design is working perfectly! However, if we discover 500 of these test cases are testing 0+0 = 0 and the remaining 500 test cases are testing 0+1 = 1, I would not be so confident to claim the design is working properly. There are so many untested scenarios that we need to run more tests! This example shows the importance of not just making sure <em>what</em> the design outputs is correct, but also making sure <em>how</em> the test cases sufficiently cover the design's input/state space.</p>
<h3 id="types-of-coverage"><a class="header" href="#types-of-coverage">Types of coverage</a></h3>
<p>There are various forms of coverage. One form of coverage is <em>code coverage</em>, which involves tracking the actual lines of code that have been executed during testing. Another form of coverage is <em>functional coverage</em>, which involves tracking a set of <em>scenarios</em> that have occurred during testing. We define a <em>scenario</em> as a sequence of events that are of interest that set the design into a particular state.</p>
<p>Currently, Vertex only supports functional coverage. Users define coverage goals according to a design's coverage specification through coverage nets.</p>
<h2 id="coverage-nets"><a class="header" href="#coverage-nets">Coverage Nets</a></h2>
<p><em>Coverage nets</em> allow the user to specify the coverage scenarios in software by determining how the design can reach a particular scenario and what the design's state should be when that scenario occurs.</p>
<p>The following coverage nets are available in Vertex:</p>
<ul>
<li><code>CoverPoint</code>: Scenarios involving a single state</li>
</ul>
<p>Example scenario: Overflow bit being asserted.</p>
<ul>
<li><code>CoverRange</code>: Scenarios involving an interval of continuous states</li>
</ul>
<p>Example scenario: All the possible values for a 8-bit input (0-255).</p>
<ul>
<li><code>CoverGroup</code>: Scenarios involving multiple states</li>
</ul>
<p>Example scenario: The minimum and maximum possible values for a 4-bit input (0 and 15).</p>
<ul>
<li><code>CoverCross</code>: Scenarios involving the cross product between two or more coverage nets</li>
</ul>
<p>Example scenario: All possible combinations of values for two 8-bit inputs (0-255 x 0-255).</p>
<h2 id="coverage-driven-test-generation-cdtg"><a class="header" href="#coverage-driven-test-generation-cdtg">Coverage-driven test generation (CDTG)</a></h2>
<p>Randomness is good for verification- it increases the confidence in your design that it is robust against all kinds of inputs. However, randomness without constraints may make it difficult for complex designs to enter coverage scenarios in order to meet coverage in as reasonable number of test vectors. Therefore, a form of constrained randomness is ideal for balancing the robustness factor of a design as well as meeting all coverage goals.</p>
<p><em>Coverage-driven test generation</em> (CDTG) is a form of constrained randomness that uses the knowledge of the existing coverage nets to generate the next random test vector within the constraints of advancing toward a currently unmet coverage goal.</p>
<p>Vertex supports this form of constrained random test generation by maintaining a list of all the known coverage nets during modeling and assigning the inputs of the model instance with random values that would advance a currently unmet coverage goal.</p>
<h2 id="relating-fishing-to-coverage---an-analogy"><a class="header" href="#relating-fishing-to-coverage---an-analogy">Relating fishing to coverage - an analogy</a></h2>
<p>You can think of functional coverage as fishing in a large open sea. We will first tell the story, and then relate it back to functional coverage.</p>
<h3 id="fishing"><a class="header" href="#fishing">Fishing</a></h3>
<p>Imagine you are the fisherman for your town. Recently you found an old map of an unexplored sea detailiing the locations in the sea of where to find fish, the types of fish, and quantities of fish. This map will be very valuable to your town if you are able to prove that its information is indeed accurate. With the old map as your guide, you embark on your quest.</p>
<p>First, you craft specially designed nets for each location marked on the map to ensure you catch the right types of fish and their corresponding amounts.</p>
<p>Second, you climb aboard your boat and carefully steer it in the right directions to reach the marked locations on the map.</p>
<p>Upon reaching a marked location, you cast that location's specially crafted net. You hope to reach your goal at each marked location by catching the correct amounts and correct types of fish.</p>
<p>After achieving the goals at each marked location in the sea, you return home to tell your town about the successful quest and that the old map is true!</p>
<h3 id="coverage-1"><a class="header" href="#coverage-1">Coverage</a></h3>
<p>There are many parallels between our fishing story and the verification process using functional coverage.</p>
<p>The entire state space of the design can be considered the large unexplored sea. It can be very daunting to try to characterize the entire sea without any form of guidance.</p>
<p>Your main source of guidance during the fishing expedition was the <em>old map</em>, which can be considered the <em>coverage specification</em> in the verification process. The coverage specification details the desired scenarios and how many times they should occur without failure during testing. Specifying <em>what</em> you would like to cover is typically good practice before trying to cover everything, which at many times is impractical for complex designs.</p>
<p>With the knowledge of what locations in the sea are important, you then create your nets for each location. This is the same as using the knowledge of which coverage scenarios are important to then create <em>coverage nets</em>, which formalize the particular scenario in software, how to reach that scenario, and what the design's state should look like during the scenario.</p>
<p>The remaining steps, reaching a marked location and casting the net, may be hard to translate to software. That's where Vertex and coverage-driven test generation shines. CDTG essentially steers your boat automatically (with some degree of randomness) and then casts the correct the net once it arrives at the given scenario. Using CTDG can automate the task of arriving at coverage scenarios for currently unmet coverage goals.</p>
<p>Once all coverage goals are met, it is sufficient to say there are no more inputs required to be tested and testing can conclude. At this point, if all tests generated their correct expected values, then the design is successfully verified. Woo-hoo! Time to return home and tell everyone in your town about functional coverage.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="events"><a class="header" href="#events">Events</a></h1>
<p>An <em>event</em> is a thing of importance that takes place during hardware simulation. Events are <em>captured</em> during hardware simulation by being written to a log file, typically called "events.log".</p>
<p>There are functions available in the HW libraries for event logging; see the <code>events</code> package for event logging functions such as <code>capture(...)</code>, <code>assert_eq(...)</code>, <code>monitor(...)</code>, and <code>stabilize(...)</code>.</p>
<h2 id="event-log-file-format"><a class="header" href="#event-log-file-format">Event log file format</a></h2>
<p>Each event captured during simulation is placed on a new line in the log file.</p>
<p>Each captured event uses the following pattern:</p>
<pre><code>&lt;timestamp&gt; &lt;severity&gt; &lt;topic&gt; &lt;comment&gt;
</code></pre>
<p>Example:</p>
<pre><code>180000000fs         INFO      ASSERT_EQ      sum receives 0110 and expects 0110
</code></pre>
<h3 id="timestamp"><a class="header" href="#timestamp">Timestamp</a></h3>
<p>The timestamp is the time at which the particular event was captured. The value will not include any spaces and may include the time units as a suffix.</p>
<p>Example:</p>
<pre><code>180000000fs
</code></pre>
<h3 id="severity"><a class="header" href="#severity">Severity</a></h3>
<p>The severity is the importance of the captured event. It can only be one of the following values: TRACE, DEBUG, INFO, WARN, ERROR, FATAL.</p>
<p>Example:</p>
<pre><code>INFO
</code></pre>
<p>By default, any events that are of TRACE, DEBUG, or INFO importance are considered <em>OKs</em>. Any events that are of WARN, ERROR, or FATAL importance are considered <em>failures</em>.</p>
<h3 id="topic"><a class="header" href="#topic">Topic</a></h3>
<p>The topic is the high-level thing that is happening in the captured event. The value will not include any spaces and is typically the function name that was called to capture the event.</p>
<p>Example:</p>
<pre><code>ASSERT_EQ
</code></pre>
<h3 id="comment"><a class="header" href="#comment">Comment</a></h3>
<p>The comment is low-level information that is important to this capture event. It is composed of two values: a subject and a predicate.</p>
<pre><code>&lt;subject&gt; &lt;predicate&gt;
</code></pre>
<p>The comment is typically discarded during analysis by Vertex and is mainly for the benefit of the user.</p>
<p>Example:</p>
<pre><code>sum receives 0110 and expects 0110
</code></pre>
<h2 id="writing-custom-events"><a class="header" href="#writing-custom-events">Writing custom events</a></h2>
<p>You can easily write custom events by calling the <code>capture(...)</code> function or by wrapping <code>capture(...)</code> in another function. It is recommended to write in the present tense when providing values for comments.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reference"><a class="header" href="#reference">Reference</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="glossary"><a class="header" href="#glossary">Glossary</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
